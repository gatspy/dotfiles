#!/usr/bin/env sh

# cookie=$1
# -loglevel trace \
# -bsf:a aac_adtstoasc \

url=$1
fname=$2
ffmpeg -y \
  -v warning \
  -loglevel debug \
  -threads 0 \
  -headers "origin: https://segmentfault.com" \
  -headers "Connection: keep-alive" \
  -headers "accept-encoding: gzip, deflate, br" \
  -headers "accept-language: zh-CN,zh;q=0.9"\
  -headers "accept: */*"\
  -headers "referer: https://segmentfault.com/ls/1650000017791749/l/1500000017790143" \
  -user_agent 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36' \
  -i "${url}" \
  -vcodec copy \
  -c copy -f mpegts ${fname}
